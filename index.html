<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arabic Alphabet Learning Tool</title>
    
    <!-- Simple favicon approach for Samsung Internet -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%23228B22'/%3E%3Ctext x='32' y='42' fill='white' font-family='Arial' font-size='32' font-weight='bold' text-anchor='middle'%3E%D8%A7%3C/text%3E%3C/svg%3E">
    
    <!-- Apple Touch Icons for iOS -->
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180' viewBox='0 0 180 180'%3E%3Crect width='180' height='180' rx='36' fill='%23228B22'/%3E%3Ctext x='90' y='115' fill='white' font-family='Arial' font-size='90' font-weight='bold' text-anchor='middle'%3E%D8%A7%3C/text%3E%3C/svg%3E">
    
    <!-- Android Chrome Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='192' height='192' viewBox='0 0 192 192'%3E%3Crect width='192' height='192' rx='38' fill='%23228B22'/%3E%3Ctext x='96' y='125' fill='white' font-family='Arial' font-size='96' font-weight='bold' text-anchor='middle'%3E%D8%A7%3C/text%3E%3C/svg%3E">
    
    <!-- Web App Manifest for PWA features -->
    <link rel="manifest" href="data:application/json;charset=utf-8,%7B%22name%22%3A%22Arabic%20Alphabet%20Learning%20Tool%22%2C%22short_name%22%3A%22Arabic%20Alphabet%22%2C%22description%22%3A%22Learn%20Arabic%20alphabet%20with%20audio%20pronunciation%22%2C%22start_url%22%3A%22./%22%2C%22display%22%3A%22standalone%22%2C%22background_color%22%3A%22%23228B22%22%2C%22theme_color%22%3A%22%23228B22%22%2C%22orientation%22%3A%22portrait%22%2C%22icons%22%3A%5B%7B%22src%22%3A%22data%3Aimage/svg%2Bxml%2C%253Csvg%2520xmlns%253D%2527http%253A//www.w3.org/2000/svg%2527%2520width%253D%2527192%2527%2520height%253D%2527192%2527%2520viewBox%253D%25270%25200%2520192%2520192%2527%253E%253Crect%2520width%253D%2527192%2527%2520height%253D%2527192%2527%2520rx%253D%252738%2527%2520fill%253D%2527%252523228B22%2527/%253E%253Ctext%2520x%253D%252796%2527%2520y%253D%2527125%2527%2520fill%253D%2527white%2527%2520font-family%253D%2527Arial%2527%2520font-size%253D%252796%2527%2520font-weight%253D%2527bold%2527%2520text-anchor%253D%2527middle%2527%253E%2525D8%2525A7%253C/text%253E%253C/svg%253E%22%2C%22sizes%22%3A%22192x192%22%2C%22type%22%3A%22image/svg%2Bxml%22%7D%5D%7D">

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: linear-gradient(135deg, #9e0303 0%, #c42e2e 50%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior: none;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .alphabet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 30px;
            direction: rtl; /* Right-to-left layout for Arabic */
        }
        
        .letter-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            direction: ltr; /* Reset direction for card content */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
        }
        
        .letter-card:hover {
            transform: translateY(-5px);
            border-color: #9e0303;
            box-shadow: 0 8px 20px rgba(158, 3, 3, 0.3);
        }
        
        .letter-card.active {
            background: #9e0303;
            color: white;
            border-color: #9e0303;
        }
        
        .arabic-letter {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
            font-family: 'Times New Roman', serif;
        }
        
        .letter-name {
            font-size: 1.1em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .letter-card.active .letter-name {
            color: white;
        }
        
        .transliteration {
            font-size: 0.9em;
            color: #666;
            font-style: italic;
        }
        
        .letter-card.active .transliteration {
            color: #f0f0f0;
        }
        
        .controls {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .control-btn {
            background: #9e0303;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 0 10px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s;
        }
        
        .control-btn:hover {
            background: #7a0202;
        }
        
        .info-panel {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid #9e0303;
        }
        
        .current-letter-display {
            text-align: center;
            font-size: 4em;
            margin: 20px 0;
            font-family: 'Times New Roman', serif;
        }
        
        /* Mobile optimizations - Galaxy S25 Plus focused */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 20px;
                margin: 5px;
                border-radius: 20px;
            }
            
            h1 {
                font-size: 2.2em;
                margin-bottom: 25px;
                text-align: center;
            }
            
            .alphabet-grid {
                grid-template-columns: repeat(5, 1fr);
                gap: 10px;
                max-width: 100%;
            }
            
            .letter-card {
                padding: 16px 8px;
                border-radius: 15px;
                min-height: 110px;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }
            
            .arabic-letter {
                font-size: 2.8em;
                margin-bottom: 5px;
                line-height: 1;
            }
            
            .letter-name {
                font-size: 0.95em;
                font-weight: bold;
                margin-bottom: 3px;
                white-space: nowrap;
            }
            
            .transliteration {
                font-size: 0.85em;
                line-height: 1;
            }
            
            .controls {
                margin-bottom: 20px;
                display: flex;
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .control-btn {
                padding: 12px 18px;
                margin: 5px;
                font-size: 0.95em;
                border-radius: 20px;
                min-width: 120px;
                touch-action: manipulation;
            }
            
            .current-letter-display {
                font-size: 4em;
                margin: 20px 0;
                line-height: 1;
            }
            
            .info-panel {
                padding: 20px;
                margin-top: 20px;
                border-radius: 15px;
            }
            
            .info-panel h3 {
                margin-top: 0;
                color: #9e0303;
            }
        }
        
        /* Galaxy S25 Plus specific (411px width in portrait) */
        @media (max-width: 450px) {
            .container {
                padding: 15px;
                margin: 0;
                border-radius: 15px;
            }
            
            h1 {
                font-size: 2em;
                margin-bottom: 20px;
            }
            
            .alphabet-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 8px;
            }
            
            .letter-card {
                padding: 14px 6px;
                min-height: 100px;
            }
            
            .arabic-letter {
                font-size: 2.5em;
            }
            
            .letter-name {
                font-size: 0.9em;
            }
            
            .transliteration {
                font-size: 0.8em;
            }
            
            .control-btn {
                padding: 10px 15px;
                font-size: 0.9em;
                min-width: 100px;
            }
            
            .current-letter-display {
                font-size: 3.5em;
            }
        }
        
        /* PWA and Standalone App Styles */
        @media (display-mode: standalone) {
            body {
                padding-top: env(safe-area-inset-top);
                padding-bottom: env(safe-area-inset-bottom);
                padding-left: env(safe-area-inset-left);
                padding-right: env(safe-area-inset-right);
            }
            
            .container {
                margin-top: 0;
            }
        }
        
        /* Prevent zoom on input focus (mobile) */
        input, button, select, textarea {
            font-size: 16px;
        }
        
        /* Touch improvements for mobile */
        @media (hover: none) and (pointer: coarse) {
            .letter-card {
                transition: transform 0.2s ease, background-color 0.2s ease;
            }
            
            .letter-card:active {
                transform: scale(0.95);
                background-color: #f0f0f0;
            }
            
            .letter-card.active:active {
                background-color: #7a0202;
            }
            
            .control-btn:active {
                transform: scale(0.95);
                background-color: #7a0202;
            }
        }
        
        /* Disable text selection and context menus */
        * {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* Allow text selection only where needed */
        .letter-name, .transliteration, h1 {
            -webkit-user-select: text;
            -moz-user-select: text;
            user-select: text;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🕌 Arabic Alphabet Learning Tool</h1>
        
        <div class="controls">
            <button class="control-btn" id="playAllBtn" onclick="togglePlayAll()">▶️ Play All</button>
            <button class="control-btn" onclick="shuffleOrder()">🔀 Random Order</button>
            <button class="control-btn" onclick="resetOrder()">↩️ Reset Order</button>
        </div>
        
        <div class="alphabet-grid" id="alphabetGrid">
            <!-- Letters will be populated by JavaScript -->
        </div>
    </div>

    <script>
        const arabicLetters = [
            {letter: 'ا', name: 'Alif', transliteration: 'ā', sound: 'alif'},
            {letter: 'ب', name: 'Bāʾ', transliteration: 'b', sound: 'baa'},
            {letter: 'ت', name: 'Tāʾ', transliteration: 't', sound: 'taa'},
            {letter: 'ث', name: 'Thāʾ', transliteration: 'th', sound: 'thaa'},
            {letter: 'ج', name: 'Jīm', transliteration: 'j', sound: 'jeem'},
            {letter: 'ح', name: 'Ḥāʾ', transliteration: 'ḥ', sound: 'haa'},
            {letter: 'خ', name: 'Khāʾ', transliteration: 'kh', sound: 'khaa'},
            {letter: 'د', name: 'Dāl', transliteration: 'd', sound: 'dal'},
            {letter: 'ذ', name: 'Dhāl', transliteration: 'dh', sound: 'thal'},
            {letter: 'ر', name: 'Rāʾ', transliteration: 'r', sound: 'raa'},
            {letter: 'ز', name: 'Zayn', transliteration: 'z', sound: 'zayn'},
            {letter: 'س', name: 'Sīn', transliteration: 's', sound: 'seen'},
            {letter: 'ش', name: 'Shīn', transliteration: 'sh', sound: 'sheen'},
            {letter: 'ص', name: 'Ṣād', transliteration: 'ṣ', sound: 'saad'},
            {letter: 'ض', name: 'Ḍād', transliteration: 'ḍ', sound: 'daad'},
            {letter: 'ط', name: 'Ṭāʾ', transliteration: 'ṭ', sound: 'taa_emphatic'},
            {letter: 'ظ', name: 'Ẓāʾ', transliteration: 'ẓ', sound: 'zaa'},
            {letter: 'ع', name: 'ʿAyn', transliteration: 'ʿ', sound: 'ayn'},
            {letter: 'غ', name: 'Ghayn', transliteration: 'gh', sound: 'ghayn'},
            {letter: 'ف', name: 'Fāʾ', transliteration: 'f', sound: 'faa'},
            {letter: 'ق', name: 'Qāf', transliteration: 'q', sound: 'qaaf'},
            {letter: 'ك', name: 'Kāf', transliteration: 'k', sound: 'kaaf'},
            {letter: 'ل', name: 'Lām', transliteration: 'l', sound: 'laam'},
            {letter: 'م', name: 'Mīm', transliteration: 'm', sound: 'meem'},
            {letter: 'ن', name: 'Nūn', transliteration: 'n', sound: 'noon'},
            {letter: 'ه', name: 'Hāʾ', transliteration: 'h', sound: 'haa_final'},
            {letter: 'و', name: 'Wāw', transliteration: 'w/ū', sound: 'waaw'},
            {letter: 'ي', name: 'Yāʾ', transliteration: 'y/ī', sound: 'yaa'}
        ];

        let currentLetters = [...arabicLetters];
        let currentIndex = 0;
        let isPlayingAll = false;
        let playAllTimeout = null;

        function createLetterCard(letterData, index) {
            return `
                <div class="letter-card" onclick="selectLetter(${index})" data-sound="${letterData.sound}">
                    <div class="arabic-letter">${letterData.letter}</div>
                    <div class="letter-name">${letterData.name}</div>
                    <div class="transliteration">${letterData.transliteration}</div>
                </div>
            `;
        }

        function renderAlphabet() {
            const grid = document.getElementById('alphabetGrid');
            grid.innerHTML = currentLetters.map((letter, index) => createLetterCard(letter, index)).join('');
        }

        function selectLetter(index) {
            // Initialize audio on first user interaction (mobile requirement)
            initializeAudio();
            
            // Remove active class from all cards
            document.querySelectorAll('.letter-card').forEach(card => card.classList.remove('active'));
            
            // Add active class to selected card
            document.querySelectorAll('.letter-card')[index].classList.add('active');
            
            const letter = currentLetters[index];
            currentIndex = index;
            
            // Play sound
            playSound(letter.sound);
        }

        // Remove unused debug functions
        let audioInitialized = false;
        
        function initializeAudio() {
            if (!audioInitialized) {
                try {
                    // Create a silent audio context to unlock audio on mobile
                    const audio = new Audio();
                    audio.volume = 0;
                    audio.play().then(() => {
                        console.log('Audio context unlocked');
                    }).catch(() => {
                        console.log('Silent audio failed, but continuing...');
                    });
                    audioInitialized = true;
                } catch (e) {
                    console.log('Audio init error:', e.message);
                }
            }
        }
        
        // Remove unused test function
        
        function playSound(soundFile) {
            initializeAudio();
            
            try {
                // Audio files are in the same directory on GitHub Pages
                const audio = new Audio(`${soundFile}.mp3`);
                audio.volume = 0.8;
                
                // Add error handling for missing audio files
                audio.addEventListener('error', () => {
                    console.log(`Audio file not found: ${soundFile}.mp3`);
                    showSoundFeedback(soundFile); // Still show visual feedback
                });
                
                const playPromise = audio.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log(`Playing: ${soundFile}.mp3`);
                        showSoundFeedback(soundFile);
                    }).catch(e => {
                        console.log(`Audio play failed: ${e.message}`);
                        showSoundFeedback(soundFile); // Show visual feedback even if audio fails
                    });
                } else {
                    showSoundFeedback(soundFile);
                }
                
            } catch (e) {
                console.log(`Error creating audio: ${e.message}`);
                showSoundFeedback(soundFile);
            }
        }

        function showSoundFeedback(soundFile) {
            // Visual feedback when audio would play
            const cards = document.querySelectorAll('.letter-card');
            const activeCard = document.querySelector('.letter-card.active');
            if (activeCard) {
                activeCard.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    activeCard.style.transform = '';
                }, 200);
            }
            console.log(`Would play sound: ${soundFile}.mp3`);
        }

        function togglePlayAll() {
            const playBtn = document.getElementById('playAllBtn');
            
            if (isPlayingAll) {
                // Stop playing
                stopPlayAll();
            } else {
                // Start playing
                startPlayAll();
            }
        }
        
        function startPlayAll() {
            isPlayingAll = true;
            const playBtn = document.getElementById('playAllBtn');
            playBtn.textContent = '⏹️ Stop';
            playBtn.classList.add('active');
            
            let index = 0;
            function playNext() {
                if (index < currentLetters.length && isPlayingAll) {
                    selectLetter(index);
                    index++;
                    if (index < currentLetters.length && isPlayingAll) {
                        playAllTimeout = setTimeout(playNext, 2000);
                    } else {
                        // Finished playing all letters
                        stopPlayAll();
                    }
                }
            }
            playNext();
        }
        
        function stopPlayAll() {
            isPlayingAll = false;
            if (playAllTimeout) {
                clearTimeout(playAllTimeout);
                playAllTimeout = null;
            }
            
            const playBtn = document.getElementById('playAllBtn');
            playBtn.textContent = '▶️ Play All';
            playBtn.classList.remove('active');
        }

        function shuffleOrder() {
            // Stop any ongoing playback
            stopPlayAll();
            
            // Create a new shuffled array
            currentLetters = [...arabicLetters].sort(() => Math.random() - 0.5);
            renderAlphabet();
            currentIndex = 0;
        }

        function resetOrder() {
            // Stop any ongoing playback
            stopPlayAll();
            
            // Reset to original order
            currentLetters = [...arabicLetters];
            renderAlphabet();
            currentIndex = 0;
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                if (!isPlayingAll) {
                    currentIndex = (currentIndex + 1) % currentLetters.length;
                    selectLetter(currentIndex);
                }
            } else if (e.key === 'ArrowLeft') {
                e.preventDefault();
                if (!isPlayingAll) {
                    currentIndex = (currentIndex - 1 + currentLetters.length) % currentLetters.length;
                    selectLetter(currentIndex);
                }
            } else if (e.key === 'Escape') {
                e.preventDefault();
                if (isPlayingAll) {
                    stopPlayAll();
                }
            }
        });

        // Initialize
        renderAlphabet();
        
        // Prevent default touch behaviors for app-like experience
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault(); // Prevent pinch zoom
            }
        }, { passive: false });
        
        document.addEventListener('touchmove', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault(); // Prevent pinch zoom
            }
        }, { passive: false });
        
        // Prevent double-tap zoom
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(e) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                e.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>